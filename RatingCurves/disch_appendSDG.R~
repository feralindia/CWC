## THIS FILE DOES NOT CALCULATE THE SDG VALUES FOR THAT GO TO DISCHARGE/SLUG.R
## take values for salt dilution gauging and bung them into the SD file
## script to eventually take in SDG data and process it
## NEED TO TWEAK SO THAT NILGIRIS OR AGHNASHINI IS REPLACED BY SITE
srcdir <- "/home/udumbu/rsb/OngoingProjects/CWC/Data/Nilgiris/saltdilution/csv"
stn.name <- list.dirs(path="/home/udumbu/rsb/OngoingProjects/CWC/Data/Nilgiris/saltdilution/raw",
                      full.names=FALSE, recursive=FALSE)
ratingdir <- "/home/udumbu/rsb/OngoingProjects/CWC/Data/Nilgiris/rating/csv"
disch.list <- list.files(path=ratingdir, full.names=TRUE, recursive=FALSE, pattern="SD.csv$")

src.files <- list.files(path=srcdir, full.names=TRUE, recursive=FALSE)
stn.no <- as.numeric(gsub("[^[:digit:] ]", "", disch.list))
for (k in 1: length(src.files)){
    sdg.in <- read.csv(src.files[k])
    sdg.in$station <- paste("wlr_", stn.no[k], sep="")
    sdg.in$method <- "slug"
    sdg.in <- subset(sdg.in, select=c("station","file.names", "method", "Stage", "Discharge", "DateTime"))
    write.table(sdg.in, file=disch.list[k], col.names=FALSE, append=TRUE, quote=FALSE, sep=",")
    cat(paste("SDG processing for stn.", stn.no[k], "completed.", sep=" "), sep="\n")
}
